{"version":3,"sources":["ModelRenderer/node_modules/browser-pack/_prelude.js","ModelRenderer/src/ModelRenderer/index.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","/// This is an example application for the T3D library\n/// Skip down to onButtonClick to get to the juicy part\n/// This will be updated sooner or later, perhaps with a\n/// written guide, who knows.\n\nlet _lr;\nlet _context;\nlet _scene;\nlet _camera;\nlet _renderer;\nlet _models = [];\n\n/// Extend Original Logger\nlet myLogger = {\n  log: function () {\n    let htmlOutput = $(\"#log\");\n    let i = 1;\n    let str = \"\";\n    while (i < arguments.length) {\n      str += arguments[i];\n      i++;\n    }\n    htmlOutput.append($(\"<p>\" + str + \"</p>\"));\n    htmlOutput.append($(\"<p>-------------</p>\"));\n  },\n};\n\n$(document).ready(function () {\n  /// Build TREE scene\n  setupScene();\n\n  /// Handle file pick\n  $(\"#filePicker\").change(function (evt) {\n    let file = evt.target.files[0];\n\n    _lr = T3D.getLocalReader(\n      file,\n      onReaderCreated,\n      \"../static/t3dworker.js\",\n      myLogger\n    );\n  });\n\n  /// Handle button click\n  $(\"#loadModelBtn\").click(onButtonClick);\n});\n\n/// Callback for when the LocalReader has finished setting up!\nfunction onReaderCreated() {\n  $(\"#fileIdInput\").removeAttr(\"disabled\");\n  $(\"#loadModelBtn\").removeAttr(\"disabled\");\n}\n\n/// The insterresting part!\nfunction onButtonClick() {\n  /// Get selected file id\n  let fileId = $(\"#fileIdInput\").val();\n\n  /// Let's use the SingleModelRenderer. It renders 3D stuff!\n  let renderClass = T3D.SingleModelRenderer;\n\n  /// All renderers must have access to a LocalReader.\n  /// The LocalReader is the object that allows us\n  /// to read from the .dat\n  let localReader = _lr;\n\n  /// The settings object is different for all renderers.\n  /// Accourding to documentation the SingleModelRenderer requires\n  /// the id of a file.\n  let settings = { id: fileId };\n\n  /// This is the value object that renderers use to write output!\n  /// If we ran multiple renderers that wanted to read output from\n  /// each other we'd have to pass this object to each Renderer!\n  /// Note that we'll want to access this object later, so make\n  /// sure it's stored in a scope we can reach from the callback\n  /// method.\n  _context = {};\n\n  /// The method to run when the renderer is done. Almost all\n  /// renderers are asynchronous since there is a lot of file\n  /// reading et cetera.\n  let callback = onRendererDone;\n\n  /// Running a renderer takes 5 mandatory parameters! Phew!\n  T3D.runRenderer(renderClass, localReader, settings, _context, callback);\n}\n\n/// Runs when the SingleModelRenderer is finshed\nfunction onRendererDone() {\n  /// Remove old models from the 3D scene\n  _models.forEach(function (mdl) {\n    _scene.remove(mdl);\n  });\n\n  /// Now we want to take a look in the output object!\n  /// The object we told the renderer to write to was _context\n  let readFromContext = _context;\n\n  /// The generator class we want output for is SingleModelRenderer\n  let readForClass = T3D.SingleModelRenderer;\n\n  /// The documentation says the generated outputs are:\n  ///\n  /// meshes : An array of THREE.Mesh objects visualizing this model file.\n  ///\n  /// Lets get that one!\n  let nameOfValue = \"meshes\";\n\n  /// Let's go!\n  _models = T3D.getContextValue(readFromContext, readForClass, nameOfValue);\n\n  /// From here on it's just THREE stuff:\n\n  /// Keeping track of the biggest model for later\n  let biggestMdl = null;\n\n  /// Add all models to the scene\n  _models.forEach(function (model) {\n    /// Find the biggest model for camera focus/fitting\n    if (\n      !biggestMdl ||\n      biggestMdl.boundingSphere.radius < model.boundingSphere.radius\n    ) {\n      biggestMdl = model;\n    }\n\n    _scene.add(model);\n  });\n\n  _camera.position.x = 200;\n  _camera.position.y = 50;\n\n  /// Focus camera to the bigest model\n  if (biggestMdl) _camera.lookAt(biggestMdl.position);\n}\n\n/// Basic THREE stuff, don't mind it\nfunction setupScene() {\n  let canvasWidth = 500;\n  let canvasHeight = 500;\n  let canvasClearColor = 0x342920; // For happy rendering, always use Van Dyke Brown.\n  let fov = 60;\n  let aspect = 1;\n  let near = 0.1;\n  let far = 50000;\n\n  _camera = new THREE.PerspectiveCamera(fov, aspect, near, far);\n\n  _scene = new THREE.Scene();\n\n  /// This scene has one ambient light source and three directional lights\n  let ambientLight = new THREE.AmbientLight(0x555555);\n  _scene.add(ambientLight);\n\n  let directionalLight1 = new THREE.DirectionalLight(0xffffff, 0.8);\n  directionalLight1.position.set(0, 0, 1);\n  _scene.add(directionalLight1);\n\n  let directionalLight2 = new THREE.DirectionalLight(0xffffff, 0.8);\n  directionalLight2.position.set(1, 0, 0);\n  _scene.add(directionalLight2);\n\n  let directionalLight3 = new THREE.DirectionalLight(0xffffff, 0.8);\n  directionalLight3.position.set(0, 1, 0);\n  _scene.add(directionalLight3);\n\n  /// Standard THREE renderer with AA\n  _renderer = new THREE.WebGLRenderer({ antialiasing: true });\n  document.body.appendChild(_renderer.domElement);\n  _renderer.setSize(canvasWidth, canvasHeight);\n  _renderer.setClearColor(canvasClearColor);\n\n  /// Add THREE orbit controls, for simple orbiting, panning and zooming\n  let orbit = new THREE.OrbitControls(_camera, _renderer.domElement);\n  orbit.enableZoom = true;\n\n  /// Note: constant continous rendering from page load\n  render();\n}\n\nfunction render() {\n  window.requestAnimationFrame(render);\n  _renderer.render(_scene, _camera);\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvTW9kZWxSZW5kZXJlci9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIi8vLyBUaGlzIGlzIGFuIGV4YW1wbGUgYXBwbGljYXRpb24gZm9yIHRoZSBUM0QgbGlicmFyeVxuLy8vIFNraXAgZG93biB0byBvbkJ1dHRvbkNsaWNrIHRvIGdldCB0byB0aGUganVpY3kgcGFydFxuLy8vIFRoaXMgd2lsbCBiZSB1cGRhdGVkIHNvb25lciBvciBsYXRlciwgcGVyaGFwcyB3aXRoIGFcbi8vLyB3cml0dGVuIGd1aWRlLCB3aG8ga25vd3MuXG5cbmxldCBfbHI7XG5sZXQgX2NvbnRleHQ7XG5sZXQgX3NjZW5lO1xubGV0IF9jYW1lcmE7XG5sZXQgX3JlbmRlcmVyO1xubGV0IF9tb2RlbHMgPSBbXTtcblxuLy8vIEV4dGVuZCBPcmlnaW5hbCBMb2dnZXJcbmxldCBteUxvZ2dlciA9IHtcbiAgbG9nOiBmdW5jdGlvbiAoKSB7XG4gICAgbGV0IGh0bWxPdXRwdXQgPSAkKFwiI2xvZ1wiKTtcbiAgICBsZXQgaSA9IDE7XG4gICAgbGV0IHN0ciA9IFwiXCI7XG4gICAgd2hpbGUgKGkgPCBhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICBzdHIgKz0gYXJndW1lbnRzW2ldO1xuICAgICAgaSsrO1xuICAgIH1cbiAgICBodG1sT3V0cHV0LmFwcGVuZCgkKFwiPHA+XCIgKyBzdHIgKyBcIjwvcD5cIikpO1xuICAgIGh0bWxPdXRwdXQuYXBwZW5kKCQoXCI8cD4tLS0tLS0tLS0tLS0tPC9wPlwiKSk7XG4gIH0sXG59O1xuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gIC8vLyBCdWlsZCBUUkVFIHNjZW5lXG4gIHNldHVwU2NlbmUoKTtcblxuICAvLy8gSGFuZGxlIGZpbGUgcGlja1xuICAkKFwiI2ZpbGVQaWNrZXJcIikuY2hhbmdlKGZ1bmN0aW9uIChldnQpIHtcbiAgICBsZXQgZmlsZSA9IGV2dC50YXJnZXQuZmlsZXNbMF07XG5cbiAgICBfbHIgPSBUM0QuZ2V0TG9jYWxSZWFkZXIoXG4gICAgICBmaWxlLFxuICAgICAgb25SZWFkZXJDcmVhdGVkLFxuICAgICAgXCIuLi9zdGF0aWMvdDNkd29ya2VyLmpzXCIsXG4gICAgICBteUxvZ2dlclxuICAgICk7XG4gIH0pO1xuXG4gIC8vLyBIYW5kbGUgYnV0dG9uIGNsaWNrXG4gICQoXCIjbG9hZE1vZGVsQnRuXCIpLmNsaWNrKG9uQnV0dG9uQ2xpY2spO1xufSk7XG5cbi8vLyBDYWxsYmFjayBmb3Igd2hlbiB0aGUgTG9jYWxSZWFkZXIgaGFzIGZpbmlzaGVkIHNldHRpbmcgdXAhXG5mdW5jdGlvbiBvblJlYWRlckNyZWF0ZWQoKSB7XG4gICQoXCIjZmlsZUlkSW5wdXRcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpO1xuICAkKFwiI2xvYWRNb2RlbEJ0blwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIik7XG59XG5cbi8vLyBUaGUgaW5zdGVycmVzdGluZyBwYXJ0IVxuZnVuY3Rpb24gb25CdXR0b25DbGljaygpIHtcbiAgLy8vIEdldCBzZWxlY3RlZCBmaWxlIGlkXG4gIGxldCBmaWxlSWQgPSAkKFwiI2ZpbGVJZElucHV0XCIpLnZhbCgpO1xuXG4gIC8vLyBMZXQncyB1c2UgdGhlIFNpbmdsZU1vZGVsUmVuZGVyZXIuIEl0IHJlbmRlcnMgM0Qgc3R1ZmYhXG4gIGxldCByZW5kZXJDbGFzcyA9IFQzRC5TaW5nbGVNb2RlbFJlbmRlcmVyO1xuXG4gIC8vLyBBbGwgcmVuZGVyZXJzIG11c3QgaGF2ZSBhY2Nlc3MgdG8gYSBMb2NhbFJlYWRlci5cbiAgLy8vIFRoZSBMb2NhbFJlYWRlciBpcyB0aGUgb2JqZWN0IHRoYXQgYWxsb3dzIHVzXG4gIC8vLyB0byByZWFkIGZyb20gdGhlIC5kYXRcbiAgbGV0IGxvY2FsUmVhZGVyID0gX2xyO1xuXG4gIC8vLyBUaGUgc2V0dGluZ3Mgb2JqZWN0IGlzIGRpZmZlcmVudCBmb3IgYWxsIHJlbmRlcmVycy5cbiAgLy8vIEFjY291cmRpbmcgdG8gZG9jdW1lbnRhdGlvbiB0aGUgU2luZ2xlTW9kZWxSZW5kZXJlciByZXF1aXJlc1xuICAvLy8gdGhlIGlkIG9mIGEgZmlsZS5cbiAgbGV0IHNldHRpbmdzID0geyBpZDogZmlsZUlkIH07XG5cbiAgLy8vIFRoaXMgaXMgdGhlIHZhbHVlIG9iamVjdCB0aGF0IHJlbmRlcmVycyB1c2UgdG8gd3JpdGUgb3V0cHV0IVxuICAvLy8gSWYgd2UgcmFuIG11bHRpcGxlIHJlbmRlcmVycyB0aGF0IHdhbnRlZCB0byByZWFkIG91dHB1dCBmcm9tXG4gIC8vLyBlYWNoIG90aGVyIHdlJ2QgaGF2ZSB0byBwYXNzIHRoaXMgb2JqZWN0IHRvIGVhY2ggUmVuZGVyZXIhXG4gIC8vLyBOb3RlIHRoYXQgd2UnbGwgd2FudCB0byBhY2Nlc3MgdGhpcyBvYmplY3QgbGF0ZXIsIHNvIG1ha2VcbiAgLy8vIHN1cmUgaXQncyBzdG9yZWQgaW4gYSBzY29wZSB3ZSBjYW4gcmVhY2ggZnJvbSB0aGUgY2FsbGJhY2tcbiAgLy8vIG1ldGhvZC5cbiAgX2NvbnRleHQgPSB7fTtcblxuICAvLy8gVGhlIG1ldGhvZCB0byBydW4gd2hlbiB0aGUgcmVuZGVyZXIgaXMgZG9uZS4gQWxtb3N0IGFsbFxuICAvLy8gcmVuZGVyZXJzIGFyZSBhc3luY2hyb25vdXMgc2luY2UgdGhlcmUgaXMgYSBsb3Qgb2YgZmlsZVxuICAvLy8gcmVhZGluZyBldCBjZXRlcmEuXG4gIGxldCBjYWxsYmFjayA9IG9uUmVuZGVyZXJEb25lO1xuXG4gIC8vLyBSdW5uaW5nIGEgcmVuZGVyZXIgdGFrZXMgNSBtYW5kYXRvcnkgcGFyYW1ldGVycyEgUGhldyFcbiAgVDNELnJ1blJlbmRlcmVyKHJlbmRlckNsYXNzLCBsb2NhbFJlYWRlciwgc2V0dGluZ3MsIF9jb250ZXh0LCBjYWxsYmFjayk7XG59XG5cbi8vLyBSdW5zIHdoZW4gdGhlIFNpbmdsZU1vZGVsUmVuZGVyZXIgaXMgZmluc2hlZFxuZnVuY3Rpb24gb25SZW5kZXJlckRvbmUoKSB7XG4gIC8vLyBSZW1vdmUgb2xkIG1vZGVscyBmcm9tIHRoZSAzRCBzY2VuZVxuICBfbW9kZWxzLmZvckVhY2goZnVuY3Rpb24gKG1kbCkge1xuICAgIF9zY2VuZS5yZW1vdmUobWRsKTtcbiAgfSk7XG5cbiAgLy8vIE5vdyB3ZSB3YW50IHRvIHRha2UgYSBsb29rIGluIHRoZSBvdXRwdXQgb2JqZWN0IVxuICAvLy8gVGhlIG9iamVjdCB3ZSB0b2xkIHRoZSByZW5kZXJlciB0byB3cml0ZSB0byB3YXMgX2NvbnRleHRcbiAgbGV0IHJlYWRGcm9tQ29udGV4dCA9IF9jb250ZXh0O1xuXG4gIC8vLyBUaGUgZ2VuZXJhdG9yIGNsYXNzIHdlIHdhbnQgb3V0cHV0IGZvciBpcyBTaW5nbGVNb2RlbFJlbmRlcmVyXG4gIGxldCByZWFkRm9yQ2xhc3MgPSBUM0QuU2luZ2xlTW9kZWxSZW5kZXJlcjtcblxuICAvLy8gVGhlIGRvY3VtZW50YXRpb24gc2F5cyB0aGUgZ2VuZXJhdGVkIG91dHB1dHMgYXJlOlxuICAvLy9cbiAgLy8vIG1lc2hlcyA6IEFuIGFycmF5IG9mIFRIUkVFLk1lc2ggb2JqZWN0cyB2aXN1YWxpemluZyB0aGlzIG1vZGVsIGZpbGUuXG4gIC8vL1xuICAvLy8gTGV0cyBnZXQgdGhhdCBvbmUhXG4gIGxldCBuYW1lT2ZWYWx1ZSA9IFwibWVzaGVzXCI7XG5cbiAgLy8vIExldCdzIGdvIVxuICBfbW9kZWxzID0gVDNELmdldENvbnRleHRWYWx1ZShyZWFkRnJvbUNvbnRleHQsIHJlYWRGb3JDbGFzcywgbmFtZU9mVmFsdWUpO1xuXG4gIC8vLyBGcm9tIGhlcmUgb24gaXQncyBqdXN0IFRIUkVFIHN0dWZmOlxuXG4gIC8vLyBLZWVwaW5nIHRyYWNrIG9mIHRoZSBiaWdnZXN0IG1vZGVsIGZvciBsYXRlclxuICBsZXQgYmlnZ2VzdE1kbCA9IG51bGw7XG5cbiAgLy8vIEFkZCBhbGwgbW9kZWxzIHRvIHRoZSBzY2VuZVxuICBfbW9kZWxzLmZvckVhY2goZnVuY3Rpb24gKG1vZGVsKSB7XG4gICAgLy8vIEZpbmQgdGhlIGJpZ2dlc3QgbW9kZWwgZm9yIGNhbWVyYSBmb2N1cy9maXR0aW5nXG4gICAgaWYgKFxuICAgICAgIWJpZ2dlc3RNZGwgfHxcbiAgICAgIGJpZ2dlc3RNZGwuYm91bmRpbmdTcGhlcmUucmFkaXVzIDwgbW9kZWwuYm91bmRpbmdTcGhlcmUucmFkaXVzXG4gICAgKSB7XG4gICAgICBiaWdnZXN0TWRsID0gbW9kZWw7XG4gICAgfVxuXG4gICAgX3NjZW5lLmFkZChtb2RlbCk7XG4gIH0pO1xuXG4gIF9jYW1lcmEucG9zaXRpb24ueCA9IDIwMDtcbiAgX2NhbWVyYS5wb3NpdGlvbi55ID0gNTA7XG5cbiAgLy8vIEZvY3VzIGNhbWVyYSB0byB0aGUgYmlnZXN0IG1vZGVsXG4gIGlmIChiaWdnZXN0TWRsKSBfY2FtZXJhLmxvb2tBdChiaWdnZXN0TWRsLnBvc2l0aW9uKTtcbn1cblxuLy8vIEJhc2ljIFRIUkVFIHN0dWZmLCBkb24ndCBtaW5kIGl0XG5mdW5jdGlvbiBzZXR1cFNjZW5lKCkge1xuICBsZXQgY2FudmFzV2lkdGggPSA1MDA7XG4gIGxldCBjYW52YXNIZWlnaHQgPSA1MDA7XG4gIGxldCBjYW52YXNDbGVhckNvbG9yID0gMHgzNDI5MjA7IC8vIEZvciBoYXBweSByZW5kZXJpbmcsIGFsd2F5cyB1c2UgVmFuIER5a2UgQnJvd24uXG4gIGxldCBmb3YgPSA2MDtcbiAgbGV0IGFzcGVjdCA9IDE7XG4gIGxldCBuZWFyID0gMC4xO1xuICBsZXQgZmFyID0gNTAwMDA7XG5cbiAgX2NhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYShmb3YsIGFzcGVjdCwgbmVhciwgZmFyKTtcblxuICBfc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTtcblxuICAvLy8gVGhpcyBzY2VuZSBoYXMgb25lIGFtYmllbnQgbGlnaHQgc291cmNlIGFuZCB0aHJlZSBkaXJlY3Rpb25hbCBsaWdodHNcbiAgbGV0IGFtYmllbnRMaWdodCA9IG5ldyBUSFJFRS5BbWJpZW50TGlnaHQoMHg1NTU1NTUpO1xuICBfc2NlbmUuYWRkKGFtYmllbnRMaWdodCk7XG5cbiAgbGV0IGRpcmVjdGlvbmFsTGlnaHQxID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoMHhmZmZmZmYsIDAuOCk7XG4gIGRpcmVjdGlvbmFsTGlnaHQxLnBvc2l0aW9uLnNldCgwLCAwLCAxKTtcbiAgX3NjZW5lLmFkZChkaXJlY3Rpb25hbExpZ2h0MSk7XG5cbiAgbGV0IGRpcmVjdGlvbmFsTGlnaHQyID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoMHhmZmZmZmYsIDAuOCk7XG4gIGRpcmVjdGlvbmFsTGlnaHQyLnBvc2l0aW9uLnNldCgxLCAwLCAwKTtcbiAgX3NjZW5lLmFkZChkaXJlY3Rpb25hbExpZ2h0Mik7XG5cbiAgbGV0IGRpcmVjdGlvbmFsTGlnaHQzID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoMHhmZmZmZmYsIDAuOCk7XG4gIGRpcmVjdGlvbmFsTGlnaHQzLnBvc2l0aW9uLnNldCgwLCAxLCAwKTtcbiAgX3NjZW5lLmFkZChkaXJlY3Rpb25hbExpZ2h0Myk7XG5cbiAgLy8vIFN0YW5kYXJkIFRIUkVFIHJlbmRlcmVyIHdpdGggQUFcbiAgX3JlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoeyBhbnRpYWxpYXNpbmc6IHRydWUgfSk7XG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoX3JlbmRlcmVyLmRvbUVsZW1lbnQpO1xuICBfcmVuZGVyZXIuc2V0U2l6ZShjYW52YXNXaWR0aCwgY2FudmFzSGVpZ2h0KTtcbiAgX3JlbmRlcmVyLnNldENsZWFyQ29sb3IoY2FudmFzQ2xlYXJDb2xvcik7XG5cbiAgLy8vIEFkZCBUSFJFRSBvcmJpdCBjb250cm9scywgZm9yIHNpbXBsZSBvcmJpdGluZywgcGFubmluZyBhbmQgem9vbWluZ1xuICBsZXQgb3JiaXQgPSBuZXcgVEhSRUUuT3JiaXRDb250cm9scyhfY2FtZXJhLCBfcmVuZGVyZXIuZG9tRWxlbWVudCk7XG4gIG9yYml0LmVuYWJsZVpvb20gPSB0cnVlO1xuXG4gIC8vLyBOb3RlOiBjb25zdGFudCBjb250aW5vdXMgcmVuZGVyaW5nIGZyb20gcGFnZSBsb2FkXG4gIHJlbmRlcigpO1xufVxuXG5mdW5jdGlvbiByZW5kZXIoKSB7XG4gIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmVuZGVyKTtcbiAgX3JlbmRlcmVyLnJlbmRlcihfc2NlbmUsIF9jYW1lcmEpO1xufVxuIl19"}